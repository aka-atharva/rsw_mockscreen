(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{469:(e,a,s)=>{Promise.resolve().then(s.bind(s,9623))},6860:(e,a,s)=>{"use strict";s.d(a,{A:()=>x});var r=s(5155),t=s(6874),i=s.n(t),n=s(5695),l=s(3783),d=s(3837),c=s(4186),o=s(1788),m=s(3999),u=s(9932);function x(){let e=(0,n.usePathname)(),a=[{name:"Data Dashboard",href:"/datapuur/dashboard",icon:l.A},{name:"Ingestion",href:"/datapuur/ingestion",icon:d.A},{name:"Transformation",href:"/datapuur/transformation",icon:c.A},{name:"Export",href:"/datapuur/export",icon:o.A}];return(0,r.jsxs)("div",{className:"w-64 h-[calc(100vh-76px)] border-r border-border p-4 bg-card/50",children:[(0,r.jsx)(u.P.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"text-foreground font-medium text-lg mb-4 px-4",children:"DataPuur Menu"}),(0,r.jsx)("nav",{className:"space-y-2",children:a.map((a,s)=>{let t=e===a.href||"/datapuur"===e&&0===s;return(0,r.jsx)(u.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*s},children:(0,r.jsxs)(i(),{href:a.href,className:(0,m.cn)("flex items-center space-x-3 px-4 py-2 rounded-lg transition-all duration-200 group",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[(0,r.jsx)(a.icon,{className:(0,m.cn)("w-5 h-5 transition-transform",t?"scale-110":"group-hover:scale-110")}),(0,r.jsx)("span",{children:a.name}),t&&(0,r.jsx)(u.P.div,{layoutId:"sidebar-indicator",className:"absolute left-0 w-1 h-8 bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]})},a.href)})})]})}},9623:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>L});var r=s(5155),t=s(2115),i=s(4865),n=s(6980),l=s(6860),d=s(4964),c=s(1277),o=s(8974),m=s(8702),u=s(4073),x=s(3999);let h=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsxs)(u.bL,{ref:a,className:(0,x.cn)("relative flex w-full touch-none select-none items-center",s),...t,children:[(0,r.jsx)(u.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(u.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(u.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});h.displayName=u.bL.displayName;var p=s(2714),f=s(9852),b=s(1284);function j(e){let{chunkSize:a,onChunkSizeChange:s,disabled:i=!1}=e,[n,l]=(0,t.useState)(a);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(p.J,{htmlFor:"chunkSize",className:"text-foreground mb-1 block",children:"Chunk Size (records per batch)"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Adjust the number of records processed at once for optimal performance"})]}),(0,r.jsx)("div",{className:"w-24",children:(0,r.jsx)(f.p,{id:"chunkSize",type:"number",min:100,max:1e4,step:100,value:n,onChange:e=>{let a=Number.parseInt(e.target.value);!isNaN(a)&&a>=100&&a<=1e4&&(l(a),s(a))},disabled:i,className:"text-right"})})]}),(0,r.jsx)(h,{value:[n],min:100,max:1e4,step:100,onValueChange:e=>{let a=e[0];l(a),s(a)},disabled:i,className:"py-4"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:"100"}),(0,r.jsx)("span",{children:"1000"}),(0,r.jsx)("span",{children:"5000"}),(0,r.jsx)("span",{children:"10000"})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-muted/50 rounded-md border border-border",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(b.A,{className:"h-5 w-5 text-primary mr-2 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,r.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Performance Considerations:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Smaller chunks"})," (100-500): Use for complex data or limited memory"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Medium chunks"})," (500-2000): Balanced performance for most datasets"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Larger chunks"})," (2000+): Faster for simple data with ample resources"]})]})]})]})})]})}var v=s(7602),g=s(8524),N=s(7168),y=s(5112),w=s(3904),k=s(1788),A=s(2355),P=s(3052),S=s(1886),C=s(9932);let z=(0,t.forwardRef)((e,a)=>{let{fileId:s,schema:i,isLoading:n=!1,onRefresh:l}=e,[d,c]=(0,t.useState)([]),[o,m]=(0,t.useState)(!1),[u,x]=(0,t.useState)(null),[h,p]=(0,t.useState)(1),[f,b]=(0,t.useState)(1),j=async()=>{if(s){m(!0),x(null);try{let e=await (0,S.Ju)(s,h,10);c(e.data),b(Math.ceil(e.total_records/10))}catch(e){console.error("Error fetching data preview:",e),x("Failed to load data preview"),c([])}finally{m(!1)}}};(0,t.useEffect)(()=>{s&&j()},[s,h]),(0,t.useImperativeHandle)(a,()=>({refresh:j}));let v=()=>{j(),l&&l()};if(!s||!i)return(0,r.jsxs)("div",{className:"text-center py-8 border border-dashed border-border rounded-lg",children:[(0,r.jsx)(y.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Data Preview Available"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Upload a file or connect to a database to preview data."})]});if(u)return(0,r.jsxs)("div",{className:"text-center py-8 border border-dashed border-border rounded-lg",children:[(0,r.jsx)(y.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Error Loading Preview"}),(0,r.jsx)("p",{className:"text-red-500 mb-4",children:u}),(0,r.jsxs)(N.$,{variant:"outline",onClick:v,className:"mx-auto",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]});let z=o||n;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,r.jsx)(y.A,{className:"w-5 h-5 mr-2 text-primary"}),"Data Preview"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(N.$,{variant:"outline",size:"sm",onClick:v,disabled:z,className:"border-primary text-primary hover:bg-primary/10",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2 ".concat(z?"animate-spin":"")}),"Refresh"]}),(0,r.jsxs)(N.$,{variant:"outline",size:"sm",onClick:()=>{if(!d||0===d.length||!i)return;let e=i.fields.map(e=>e.name),a=new Blob([[e.join(","),...d.map(a=>e.map(e=>{let s=a[e];return"string"==typeof s&&s.includes(",")?'"'.concat(s,'"'):null!=s?s:""}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(a),r=document.createElement("a");r.setAttribute("href",s),r.setAttribute("download","data_preview_".concat(new Date().getTime(),".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)},disabled:z||0===d.length,className:"border-secondary text-secondary hover:bg-secondary/10",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),z?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)(w.A,{className:"h-8 w-8 text-primary animate-spin"})}):0===d.length?(0,r.jsxs)("div",{className:"text-center py-8 border border-dashed border-border rounded-lg",children:[(0,r.jsx)(y.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Data Available"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"The preview could not be generated or the data is empty."})]}):(0,r.jsxs)(C.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(g.XI,{children:[(0,r.jsx)(g.A0,{children:(0,r.jsx)(g.Hj,{children:i.fields.map(e=>(0,r.jsx)(g.nd,{className:"whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.type,")"]})]})},e.name))})}),(0,r.jsx)(g.BF,{children:d.map((e,a)=>(0,r.jsx)(g.Hj,{children:i.fields.map(s=>(0,r.jsx)(g.nA,{className:"whitespace-nowrap",children:void 0!==e[s.name]&&null!==e[s.name]?String(e[s.name]):""},"".concat(a,"-").concat(s.name)))},a))})]})})}),f>1&&(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,r.jsxs)(N.$,{variant:"outline",size:"sm",onClick:()=>{h>1&&p(h-1)},disabled:1===h||z,children:[(0,r.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",h," of ",f]}),(0,r.jsxs)(N.$,{variant:"outline",size:"sm",onClick:()=>{h<f&&p(h+1)},disabled:h===f||z,children:["Next",(0,r.jsx)(P.A,{className:"h-4 w-4 ml-2"})]})]})]})]})});z.displayName="DataPreview";var D=s(3744),I=s(4213),E=s(2657),_=s(9676),R=s(381);function L(){let[e,a]=(0,t.useState)("file-upload"),[s,u]=(0,t.useState)(null),[x,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[b,g]=(0,t.useState)(1e3),[N,w]=(0,t.useState)(""),k=(0,t.useRef)(null),A=(0,t.useRef)(null),P={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},S=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";u(e),a&&w(a)},L=e=>{f(e)},U=()=>{k.current&&k.current.refresh()},F=()=>{A.current&&A.current.refresh()};return(0,t.useEffect)(()=>{"history"===e?U():"preview"===e&&N&&F()},[e,N]),(0,r.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,r.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,r.jsx)(n.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(i.A,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"flex-1 p-8",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsx)(C.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-foreground mb-6",children:"Data Ingestion"}),(0,r.jsx)(C.P.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-muted-foreground text-xl mb-8",children:"Import and collect data from various sources for analysis and transformation."}),(0,r.jsxs)(C.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-8",children:[(0,r.jsxs)(d.tU,{defaultValue:"file-upload",onValueChange:a,className:"w-full",children:[(0,r.jsxs)(d.j7,{className:"grid grid-cols-4 mb-8",children:[(0,r.jsxs)(d.Xi,{value:"file-upload",className:"flex items-center gap-2",children:[(0,r.jsx)(D.A,{className:"h-4 w-4"}),"File Upload"]}),(0,r.jsxs)(d.Xi,{value:"database",className:"flex items-center gap-2",children:[(0,r.jsx)(I.A,{className:"h-4 w-4"}),"Database Connection"]}),(0,r.jsxs)(d.Xi,{value:"preview",className:"flex items-center gap-2",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"}),"Data Preview"]}),(0,r.jsxs)(d.Xi,{value:"history",className:"flex items-center gap-2",children:[(0,r.jsx)(_.A,{className:"h-4 w-4"}),"Injection History"]})]}),(0,r.jsx)(d.av,{value:"file-upload",className:"space-y-6",children:(0,r.jsx)(C.P.div,{variants:P,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,r.jsx)(c.e,{onSchemaDetected:S,isProcessing:x,setIsProcessing:h,chunkSize:b,onStatusChange:L,onUploadComplete:U})})}),(0,r.jsx)(d.av,{value:"database",className:"space-y-6",children:(0,r.jsx)(C.P.div,{variants:P,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,r.jsx)(o.u,{onSchemaDetected:S,isProcessing:x,setIsProcessing:h,chunkSize:b,onStatusChange:L,onConnectionComplete:U})})}),(0,r.jsx)(d.av,{value:"preview",className:"space-y-6",children:(0,r.jsx)(C.P.div,{variants:P,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,r.jsx)(z,{ref:A,fileId:N,schema:s,isLoading:x,onRefresh:F})})}),(0,r.jsx)(d.av,{value:"history",className:"space-y-6",children:(0,r.jsx)(C.P.div,{variants:P,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,r.jsx)(v.q,{ref:k})})})]}),p&&(0,r.jsx)(C.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/10 border border-primary rounded-lg p-4 text-primary",children:p}),("file-upload"===e||"database"===e)&&(0,r.jsxs)(C.P.div,{variants:P,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,r.jsx)(R.A,{className:"w-5 h-5 mr-2 text-primary"}),"Processing Configuration"]}),(0,r.jsx)(j,{chunkSize:b,onChunkSizeChange:e=>{g(e)},disabled:x})]}),s&&("file-upload"===e||"database"===e||"preview"===e)&&(0,r.jsxs)(C.P.div,{variants:P,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,r.jsx)(y.A,{className:"w-5 h-5 mr-2 text-primary"}),"Detected Schema"]}),(0,r.jsx)(m.g,{schema:s})]})]})]})})]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[103,244,766,329,646,671,668,444,951,441,684,358],()=>a(469)),_N_E=e.O()}]);