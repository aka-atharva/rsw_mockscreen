"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{1277:(e,t,a)=>{a.d(t,{e:()=>p});var s=a(5155),r=a(2115),l=a(3744),n=a(5339),i=a(7434),o=a(4416),d=a(9869),c=a(7168),m=a(5863),u=a(3999);let h=r.forwardRef((e,t)=>{let{className:a,value:r,...l}=e;return(0,s.jsx)(m.bL,{ref:t,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:(0,s.jsx)(m.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});h.displayName=m.bL.displayName;var x=a(9026),f=a(9932);function p(e){let{onSchemaDetected:t,isProcessing:a,setIsProcessing:m,chunkSize:u,onStatusChange:p,onUploadComplete:g}=e,[j,b]=(0,r.useState)(null),[y,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)(0),[k,A]=(0,r.useState)(""),C=(0,r.useRef)(null),S=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?N(!0):"dragleave"===e.type&&N(!1)},E=e=>{let t=e.name.split(".").pop().toLowerCase();if("csv"!==t&&"json"!==t){A("Only CSV and JSON files are supported");return}if(e.size>0x3200000){A("File size exceeds 50MB limit");return}b(e),A("")},F=async()=>{if(!j)return;m(!0),w(0),A(""),p("Preparing to upload file...");let e=new FormData;e.append("file",j),e.append("chunkSize",u.toString());try{let a=await fetch("".concat("http://localhost:8080/api","/datapuur/upload"),{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to upload file")}let s=(await a.json()).file_id;p("File uploaded successfully! Detecting schema...");let r=await fetch("".concat("http://localhost:8080/api","/datapuur/schema/").concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to detect schema")}let l=await r.json();t(l.schema,s),p("Schema detected successfully!"),g&&g()}catch(e){console.error("Error uploading file:",e),A(e.message||"Failed to upload file"),p("")}finally{m(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(l.A,{className:"w-5 h-5 mr-2 text-primary"}),"Upload Data Files"]}),k&&(0,s.jsxs)(x.Fc,{variant:"destructive",className:"mb-4",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)(x.TN,{children:k})]}),j?(0,s.jsxs)("div",{className:"border rounded-lg p-6 bg-card",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i.A,{className:"h-8 w-8 text-primary mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:j.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(j.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{b(null),w(0),A(""),p("")},disabled:a,className:"text-muted-foreground hover:text-foreground",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]}),v>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(h,{value:v,className:"h-2"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:[v,"% uploaded"]})]}),(0,s.jsx)(c.$,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",onClick:F,disabled:a,children:a?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Upload File"]})})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(y?"border-primary bg-primary/5":"border-border bg-background/50"),onDragEnter:S,onDragLeave:S,onDragOver:S,onDrop:e=>{e.preventDefault(),e.stopPropagation(),N(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&E(e.dataTransfer.files[0])},children:[(0,s.jsx)("input",{ref:C,type:"file",className:"hidden",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&E(e.target.files[0])},accept:".csv,.json"}),(0,s.jsx)(f.P.div,{whileHover:{scale:1.05},className:"inline-block",children:(0,s.jsx)(l.A,{className:"w-16 h-16 text-primary mx-auto mb-4"})}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Drag and drop files here, or click to browse"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,s.jsx)(c.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>C.current.click(),children:"Select Files"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-2 sm:mt-0 sm:ml-2 flex items-center",children:"Supported formats: CSV, JSON"})]})]}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Instructions:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"Upload CSV or JSON files up to 50MB"}),(0,s.jsx)("li",{children:"CSV files should use comma as delimiter and include a header row"}),(0,s.jsx)("li",{children:"JSON files should contain an array of objects with consistent structure"}),(0,s.jsx)("li",{children:"The system will automatically detect the schema of your data"}),(0,s.jsx)("li",{children:"Adjust chunk size in the Processing Configuration section for large files"})]})]})]})}},1886:(e,t,a)=>{async function s(){try{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found");let t=await fetch("".concat("http://localhost:8080/api","/datapuur/dashboard"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.text();throw console.error("API Error Body:",e),Error("Failed to fetch dashboard data: ".concat(t.status," - ").concat(t.statusText))}return await t.json()}catch(e){throw console.error("Error fetching dashboard data:",e),e}}async function r(){try{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found");let t=await fetch("".concat("http://localhost:8080/api","/kginsights/dashboard"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.text();throw console.error("API Error Body:",e),Error("Failed to fetch KGraph dashboard data: ".concat(t.status," - ").concat(t.statusText))}return await t.json()}catch(e){throw console.error("Error fetching KGraph dashboard data:",e),e}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{let s=localStorage.getItem("token");if(!s)throw Error("No authentication token found");let r=await fetch("".concat("http://localhost:8080/api","/datapuur/preview/").concat(e,"?page=").concat(t,"&page_size=").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to fetch data preview")}return await r.json()}catch(e){throw console.error("Error fetching data preview:",e),e}}async function n(){try{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found");let t=await fetch("".concat("http://localhost:8080/api","/datapuur/injection-history"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.text();throw console.error("API Error Body:",e),Error("Failed to fetch injection history: ".concat(t.status," - ").concat(t.statusText))}return await t.json()}catch(e){throw console.error("Error fetching injection history:",e),e}}a.d(t,{Ju:()=>l,M9:()=>n,iI:()=>r,tO:()=>s})},2714:(e,t,a)=>{a.d(t,{J:()=>d});var s=a(5155),r=a(2115),l=a(968),n=a(3243),i=a(3999);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,i.cn)(o(),a),...r})});d.displayName=l.b.displayName},4964:(e,t,a)=>{a.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>i});var s=a(5155),r=a(2115),l=a(64),n=a(3999);let i=l.bL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=l.B8.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});d.displayName=l.l9.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=l.UC.displayName},5784:(e,t,a)=>{a.d(t,{bq:()=>u,eb:()=>p,gC:()=>f,l6:()=>c,yv:()=>m});var s=a(5155),r=a(2115),l=a(1146),n=a(6474),i=a(7863),o=a(5196),d=a(3999);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=l.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(h,{}),(0,s.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});p.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},7602:(e,t,a)=>{a.d(t,{q:()=>j});var s=a(5155),r=a(2115),l=a(8524),n=a(8145),i=a(7168),o=a(3999);function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-muted",t),...a})}var c=a(7434),m=a(4213),u=a(5339),h=a(3904),x=a(9676),f=a(1886),p=a(9932),g=a(5951);let j=(0,r.forwardRef)((e,t)=>{let[a,o]=(0,r.useState)([]),[j,b]=(0,r.useState)(!0),[y,N]=(0,r.useState)(null),v=async()=>{b(!0),N(null);try{let e=await (0,f.M9)();o(e)}catch(e){console.error("Failed to fetch injection history:",e),N("Failed to load injection history. Please try again.")}finally{b(!1)}};(0,r.useEffect)(()=>{v()},[]),(0,r.useImperativeHandle)(t,()=>({refresh:v}));let w=e=>{try{return(0,g.m)(new Date(e),{addSuffix:!0})}catch(t){return e}},k=e=>{switch(e){case"success":return(0,s.jsx)(n.E,{className:"bg-green-500",children:"Success"});case"processing":return(0,s.jsx)(n.E,{className:"bg-blue-500",children:"Processing"});case"error":return(0,s.jsx)(n.E,{className:"bg-red-500",children:"Error"});default:return(0,s.jsx)(n.E,{className:"bg-gray-500",children:e})}},A=e=>{switch(e){case"file":return(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"});case"database":return(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2"});default:return null}};return y?(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4 my-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-red-400"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading injection history"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,s.jsx)("p",{children:y})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)(i.$,{size:"sm",onClick:v,className:"bg-red-100 text-red-800 hover:bg-red-200",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})})]})]})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(x.A,{className:"w-5 h-5 mr-2 text-primary"}),"Injection History"]}),(0,s.jsxs)(i.$,{variant:"outline",size:"sm",onClick:v,disabled:j,className:"border-primary text-primary hover:bg-primary/10",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2 ".concat(j?"animate-spin":"")}),"Refresh"]})]}),j?(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)(d,{className:"h-12 w-full"})},t))}):0===a.length?(0,s.jsxs)("div",{className:"text-center py-8 border border-dashed border-border rounded-lg",children:[(0,s.jsx)(x.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Injection History"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No data has been injected yet."})]}):(0,s.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,s.jsxs)(l.XI,{children:[(0,s.jsx)(l.A0,{children:(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nd,{children:"Type"}),(0,s.jsx)(l.nd,{children:"Name"}),(0,s.jsx)(l.nd,{children:"Time"}),(0,s.jsx)(l.nd,{children:"Status"}),(0,s.jsx)(l.nd,{children:"Records"})]})}),(0,s.jsx)(l.BF,{children:a.map(e=>(0,s.jsxs)(l.Hj,{children:[(0,s.jsxs)(l.nA,{className:"font-medium flex items-center",children:[A(e.type),e.type.charAt(0).toUpperCase()+e.type.slice(1)]}),(0,s.jsx)(l.nA,{children:e.name}),(0,s.jsx)(l.nA,{children:w(e.timestamp)}),(0,s.jsx)(l.nA,{children:k(e.status)}),(0,s.jsx)(l.nA,{children:e.records||"-"})]},e.id))})]})})})]})});j.displayName="InjectionHistory"},8145:(e,t,a)=>{a.d(t,{E:()=>i});var s=a(5155),r=a(3243),l=a(3999);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:a}),t),...r})}},8524:(e,t,a)=>{a.d(t,{A0:()=>i,BF:()=>o,Hj:()=>d,XI:()=>n,nA:()=>m,nd:()=>c});var s=a(5155),r=a(2115),l=a(3999);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});o.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("bg-primary font-medium text-primary-foreground",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},8702:(e,t,a)=>{a.d(t,{g:()=>m});var s=a(5155),r=a(2115),l=a(1788),n=a(6474),i=a(3052),o=a(7168),d=a(8145),c=a(9932);function m(e){let{schema:t}=e,[a,m]=(0,r.useState)({});if(!t||!t.fields)return(0,s.jsx)("div",{className:"text-center p-4 text-muted-foreground",children:"No schema detected yet. Upload a file or connect to a database to view the schema."});let u=e=>{m({...a,[e]:!a[e]})},h=e=>{switch(e.toLowerCase()){case"string":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"number":case"integer":case"float":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"boolean":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"date":case"datetime":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"object":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300";case"array":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:t.name||"Data Schema"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.fields.length," fields detected"]})]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="schema.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)},className:"text-primary border-primary hover:bg-primary/10",children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Download Schema"]})]}),(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-3 bg-muted text-muted-foreground font-medium text-sm",children:[(0,s.jsx)("div",{className:"col-span-4",children:"Field Name"}),(0,s.jsx)("div",{className:"col-span-2",children:"Type"}),(0,s.jsx)("div",{className:"col-span-2",children:"Format"}),(0,s.jsx)("div",{className:"col-span-2",children:"Nullable"}),(0,s.jsx)("div",{className:"col-span-2",children:"Sample"})]}),(0,s.jsx)("div",{className:"divide-y divide-border",children:t.fields.map((e,t)=>(0,s.jsxs)(c.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"grid grid-cols-12 gap-4 p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>u(e.name),children:[(0,s.jsxs)("div",{className:"col-span-4 font-medium text-foreground flex items-center",children:[e.children&&e.children.length>0?a[e.name]?(0,s.jsx)(n.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}):(0,s.jsx)(i.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}):(0,s.jsx)("span",{className:"w-5"}),e.name]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(d.E,{className:"font-normal ".concat(h(e.type)),children:e.type})}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:e.format||"-"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:e.nullable?"Yes":"No"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground truncate",children:void 0!==e.sample&&null!==e.sample?String(e.sample).substring(0,20)+(String(e.sample).length>20?"...":""):"-"}),a[e.name]&&e.children&&e.children.length>0&&(0,s.jsx)("div",{className:"col-span-12 pl-6 border-l-2 border-muted ml-2 mt-2",children:(0,s.jsx)("div",{className:"space-y-2",children:e.children.map((t,a)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-2 bg-muted/30 rounded-md",children:[(0,s.jsx)("div",{className:"col-span-4 font-medium text-foreground",children:t.name}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(d.E,{className:"font-normal ".concat(h(t.type)),children:t.type})}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:t.format||"-"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:t.nullable?"Yes":"No"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground truncate",children:void 0!==t.sample&&null!==t.sample?String(t.sample).substring(0,20)+(String(t.sample).length>20?"...":""):"-"})]},"".concat(e.name,"-").concat(t.name)))})})]},e.name))})]})]})}},8974:(e,t,a)=>{a.d(t,{u:()=>b});var s=a(5155),r=a(2115),l=a(4213),n=a(5487),i=a(9803),o=a(2919),d=a(5112),c=a(7863),m=a(6474),u=a(7168),h=a(9852),x=a(2714),f=a(5784),p=a(9026),g=a(760),j=a(9932);function b(e){let{onSchemaDetected:t,isProcessing:a,setIsProcessing:b,chunkSize:y,onStatusChange:N,onConnectionComplete:v}=e,[w,k]=(0,r.useState)("postgresql"),[A,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(""),[F,T]=(0,r.useState)(""),[R,z]=(0,r.useState)(""),[P,I]=(0,r.useState)(""),[D,B]=(0,r.useState)(""),[J,L]=(0,r.useState)(!1),[U,O]=(0,r.useState)(""),H=async()=>{if(!A||!S||!F||!R||!D){O("All fields except password are required");return}b(!0),O(""),N("Connecting to database...");try{let e={type:w,config:{host:A,port:Number.parseInt(S),database:F,username:R,password:P,table:D},chunkSize:y},a=await fetch("".concat("http://localhost:8080/api","/datapuur/db-schema"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to connect to database")}let s=await a.json();t(s.schema),N("Connected to database successfully!"),v&&v()}catch(e){console.error("Error connecting to database:",e),O(e.message||"Failed to connect to database"),N("")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(l.A,{className:"w-5 h-5 mr-2 text-primary"}),"Database Connection"]}),U&&(0,s.jsx)(p.Fc,{variant:"destructive",className:"mb-4",children:(0,s.jsx)(p.TN,{children:U})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"db-type",children:"Database Type"}),(0,s.jsxs)(f.l6,{value:w,onValueChange:k,disabled:a,children:[(0,s.jsx)(f.bq,{id:"db-type",children:(0,s.jsx)(f.yv,{placeholder:"Select database type"})}),(0,s.jsxs)(f.gC,{children:[(0,s.jsx)(f.eb,{value:"postgresql",children:"PostgreSQL"}),(0,s.jsx)(f.eb,{value:"mysql",children:"MySQL"}),(0,s.jsx)(f.eb,{value:"mssql",children:"SQL Server"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"host",children:"Host"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.p,{id:"host",placeholder:"localhost or IP address",value:A,onChange:e=>C(e.target.value),disabled:a})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"port",children:"Port"}),(0,s.jsx)(h.p,{id:"port",placeholder:"5432",value:S,onChange:e=>E(e.target.value.replace(/[^0-9]/g,"")),disabled:a})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"database",children:"Database Name"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.p,{id:"database",placeholder:"Database name",value:F,onChange:e=>T(e.target.value),disabled:a})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"username",children:"Username"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.p,{id:"username",placeholder:"Database username",value:R,onChange:e=>z(e.target.value),disabled:a})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"password",children:"Password"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.p,{id:"password",type:"password",placeholder:"Database password",value:P,onChange:e=>I(e.target.value),disabled:a})]})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,s.jsx)(x.J,{htmlFor:"table",children:"Table Name"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.p,{id:"table",placeholder:"Table to query",value:D,onChange:e=>B(e.target.value),disabled:a})]})]})]}),(0,s.jsxs)("div",{className:"pt-2",children:[(0,s.jsx)(u.$,{type:"button",variant:"outline",size:"sm",onClick:()=>L(!J),className:"flex items-center text-muted-foreground",children:J?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Hide Advanced Options"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Show Advanced Options"]})}),(0,s.jsx)(g.N,{children:J&&(0,s.jsx)(j.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"pt-4 space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"query",children:"Custom Query (Optional)"}),(0,s.jsx)(h.p,{id:"query",placeholder:"SELECT * FROM table WHERE condition",disabled:a}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to use the table name specified above"})]})})})})]}),(0,s.jsx)(u.$,{onClick:H,disabled:a,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground mt-4",children:a?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting..."]}):"Connect to Database"}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Connection Instructions:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"Ensure your database is accessible from your current network"}),(0,s.jsx)("li",{children:"For cloud databases, check if you need to whitelist your IP address"}),(0,s.jsx)("li",{children:"Use a read-only user account for security best practices"}),(0,s.jsx)("li",{children:"The system will automatically detect the schema of your selected table"}),(0,s.jsx)("li",{children:"Large tables will be processed in chunks based on your configuration"})]})]})]})}},9026:(e,t,a)=>{a.d(t,{Fc:()=>o,TN:()=>d});var s=a(5155),r=a(2115),l=a(3243),n=a(3999);let i=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:r}),a),...l})});o.displayName="Alert",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},9852:(e,t,a)=>{a.d(t,{p:()=>n});var s=a(5155),r=a(2115),l=a(3999);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"}}]);